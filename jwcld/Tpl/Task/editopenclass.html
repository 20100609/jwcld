<include file="./jwcld/Tpl/headerTemp.html" />
<section id='content'>
    <div class='container-fluid'>
    <div class='row-fluid' id='content-wrapper'>
    <div class='span12'>
    <div class='row-fluid'>
        <div class='span12'>
            <div class='page-header'>
                <h1 class='pull-left'>
                    <i class='icon-table'></i>
                    <span>听课记录在线表单修改</span>
                </h1>
            </div>
        </div>
	
<div class='row-fluid'>
    <div class='span12 box bordered-box green-border' style='margin-bottom:0;'>
        <div class='box-header green-background'>
            <div class='text-center'>
            北京师范大学本科教学观摩课听课记录表（2016版）</div>
        </div>
        <div class=''>
		<form id='form' accept-charset="UTF-8" class="form form-horizontal" method="post" style="margin-bottom: 0;">
            <div class='responsive-table' id="no-more-tables">
                <div class='scrollable-area'>
                    <table class='table table-bordered table-hover table-striped' style='margin-bottom:0;'>
                    	<tr>
                            <th>课程名称</th>
                            <td colspan="4">
                                <input class='span12' id='full-name' type='text' disabled="disabled" name='cname' value='{$record.cname}' />
                            </td>
                            <th style="width:100px;">学生院系/年级</th>
                            <td colspan="6">
                                <input class='span12' id='full-name' type='text' disabled="disabled" name='sc' value='{$record.scollege}/{$record.sclass}' />
                            </td>
                        </tr>
                        <tr>
                            <th>教师姓名</th>
                            <td colspan="2">
                                <input class='span12' id='full-name' type='text' disabled="disabled" name='tname' value='{$record.teaname}' />
                            </td>
                            <th style="width:70px">单位</th>
                            <td colspan="4">
                                <!--<textarea class="form-control" rows="2" disabled="disabled">生命科学与技术学院</textarea>-->
                                <input class='span12' id='full-name' type='text' disabled="disabled" name='tcollege' value='{$record.teacollege}' />
                            </td>
                            <th style="width:70px">职称</th>
                            <td colspan="6">
                                <input class='span12' id='full-name' type='text' disabled="disabled" name='title' value='{$record.teatitle}' />
                            </td>             
                        </tr>
                        <tr>
                            <th>上课时间</th>
                            <td colspan="2">
                                <input class='span12' id='full-name' type='text' disabled="disabled" name='ctime' value='{$record.sktime}' />
                            </td>
                            <th style="width:70px">上课地点</th>
                            <td colspan="1">
                                <input class='span12' id='full-name' type='text' disabled="disabled" name='cplase' value='{$record.skplace}' />
                            </td>
                            <th>听课时间<font color="red" size="4px">*</font></th>
                            <td colspan="4">
                                <div class='datepicker input-append' id='datepicker'>
                                    <input class='input-medium' data-format='yyyy-MM-dd' type='text' name='tktime' value='{$record.tktime}'/>
                                    <span class='add-on'>
                                        <i data-date-icon='icon-calendar' data-time-icon='icon-time'></i>
                                    </span>
                                </div>
                            </td>
                            <th style="width:70px">听课节数<font color="red" size="4px">*</font></th>
                            <td colspan="4">
                                <input class='span12' type='number' name='tkjs' value='{$record.tkjs}'  />
                            </td>
                        </tr>
                        <tr>
                            <th>培养层次<font color="red" size="4px">*</font></th>
                            <td colspan="12">
                                <div class="form-group">
                                    <if condition="$record['pycc'] eq '1'">
                                    <!--label for="name">文本框</label-->
                                    <label class="radio inline">
                                        <input id='' type='radio' value='1' name='pycc'  checked="checked" />&nbsp;&nbsp;本科
                                    </label>
                                    <else />
                                    <label class="radio inline">
                                        <input id='' type='radio' value='1' name='pycc' / >&nbsp;&nbsp;本科
                                    </label>
                                    </if>
                                    <if condition="$record['pycc'] eq '2'">
                                    <label class="radio inline">
                                        <input id='' type='radio' value='2' name='pycc' / checked="checked">&nbsp;&nbsp;研究生
                                    </label>
                                    <else />
                                    <label class="radio inline">
                                        <input id='' type='radio' value='2' name='pycc' />&nbsp;&nbsp;研究生
                                    </label>
                                    </if>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th style="width: 180px;">本次课程的主要内容<font color="red" size="4px">*</font></th>
                            <td colspan="12">
                                <div class="form-group">
                                    <textarea class="form-control" rows="2" style="margin-left: 0px; margin-right: 0px; width: 99%;" name="content">{$record['content']}</textarea>
                                </div>
                            </td>
                        </tr> 
                        <tr>
                            <th>教师教学的突出优点和特色<font color="red" size="4px">*</font></th>
                            <td colspan="12">
                                <div class="form-group">
                                    <textarea class="form-control" rows="5" style="margin-left: 0px; margin-right: 0px; width: 99%;" name="tctd">{$record['tctd']}</textarea>
                                </div>
                            </td>
                        </tr> 
                        <tr>
                            <th>您听课后的收获<font color="red" size="4px">*</font></th>
                            <td colspan="12">
                                <div class="form-group">
                                    <textarea class="form-control" rows="5" style="margin-left: 0px; margin-right: 0px; width: 99%;" name="tksh">{$record['tksh']}</textarea>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th>课后研讨情况及您的收获</th>
                            <td colspan="12">
                                <div class="form-group">
                                    <!--label for="name">文本框</label-->
                                    <textarea class="form-control" rows="5" style="margin-left: 0px; margin-right: 0px; width: 99%;" name="tlsh">{$record['tlsh']}</textarea>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th>您对本次观摩教学的建议</th>
                            <td colspan="12">
                                <div class="form-group">
                                   <textarea class="form-control" rows="5" style="margin-left: 0px; margin-right: 0px; width: 99%;" name="pjjy">{$record['pjjy']}</textarea>
                                </div>
                            </td>
                        </tr> 
                        <tr>
                            <th>对本次教学课程的总体评价<font color="red" size="4px">*</font></th>
                            <td colspan="12">
                                <div class="form-group">
                                    <label class="radio inline">
                                        <if condition="$record['ztpj'] eq '1'">
                                            <input id='' type='radio' value='1' name='ztpj'  checked="checked"/>&nbsp;&nbsp;好
                                        <else />
                                            <input id='' type='radio' value='1' name='ztpj' />&nbsp;&nbsp;好
                                        </if>
                                    </label>
                                    <label class="radio inline">
                                        <if condition="$record['ztpj'] eq '2'">
                                            <input id='' type='radio' value='2' name='ztpj'  checked="checked"/>&nbsp;&nbsp;较好
                                        <else />
                                            <input id='' type='radio' value='2' name='ztpj' />&nbsp;&nbsp;较好
                                        </if>
                                    </label>
                                    <label class="radio inline">
                                        <if condition="$record['ztpj'] eq '3'">
                                            <input id='' type='radio' value='3' name='ztpj'  checked="checked"/>&nbsp;&nbsp;一般
                                        <else />
                                            <input id='' type='radio' value='3' name='ztpj' />&nbsp;&nbsp;一般
                                        </if>
                                    </label>
                                    <label class="radio inline">
                                        <if condition="$record['ztpj'] eq '4'">
                                            <input id='' type='radio' value='4' name='ztpj'  checked="checked"/>&nbsp;&nbsp;较差
                                        <else />
                                            <input id='' type='radio' value='4' name='ztpj' />&nbsp;&nbsp;较差
                                        </if>
                                    </label>
                                    <label class="radio inline">
                                        <if condition="$record['ztpj'] eq '5'">
                                            <input id='' type='radio' value='5' name='ztpj'  checked="checked"/>&nbsp;&nbsp;差
                                        <else />
                                            <input id='' type='radio' value='5' name='ztpj' />&nbsp;&nbsp;差
                                        </if>
                                    </label>
                                    <label class="radio inline">
                                        <if condition="$record['ztpj'] eq '6'">
                                            <input id='' type='radio' value='6' name='ztpj'  checked="checked"/>&nbsp;&nbsp;未评价
                                        <else />
                                            <input id='' type='radio' value='6' name='ztpj' />&nbsp;&nbsp;未评价
                                        </if>
                                    </label>
                                </div>
                            </td>
                        </tr> 
                        <tr>
                            <th colspan="1">观摩课听课教师信息</th>
                            <th style="width:70px">院系(选填)</th>
                            <td colspan="3">
                                <input class='span12' id='full-name' type='text' name='lcollege' value='{$record.lcollege}'/>
                            </td>
                            <th style="width:70px">专业领域</th>
                            <td colspan="3">
                                <input class='span12' id='full-name' type='text' name='larea' value='{$record.larea}'/>
                            </td>
                            <th style="width:50px">职称</th>
                            <td colspan="2">
                                <input class='span12' id='full-name' type='text' name='ltitle' value='{$record.ltitle}'/>
                            </td>
                        </tr>                                  
                    </table>
                    <input type='hidden' name='rid' value='{$record.rid}'>
                    <input type='hidden' name='rtype' value='2'>
                    <button type="button" class='btn btn-success' save='1' style='margin-right:20px'><i class='icon-save'></i>提交</button>
                    <button type="button" class='btn btn-success' save='0' style='margin-right:20px'><i class='icon-save'></i>保存</button>
                    <a class="btn" href="{:u('Task/showTask')}">取消</a>
                    <div class="error">注：如未填写完毕，可选择“保存”；如填写完毕，可选择“提交”（提交时需填写所有必填信息）；如需修改，请进“查看听课记录”中修改。</div>
                </div>
				</div>
			</form>
        </div>
    </div>
</div>

</div>
</div>
</div>
</div>
</section>

<script type="text/javascript">
    $(document).ready(function(){
        $("#dialog").dialog({
            autoOpen:false,
            buttons:{
            关闭:function(){
                location.href="{:U('Task/showTask')}";
            }
        }
        });
        $("#form").validate({
                    rules:{
                        pjjy:{
                            required:true
                        },
                        content:{
                            required:true
                        },
                        pycc:{
                            required:true
                        },
                        tktime:{
                            required:true
                        },
                        tkjs:{
                            required:true
                        },
                        tctd:{
                            required:true
                        },
                        tksh:{
                            required:true
                        },
                        larea:{
                            required:true
                        },
                    },
                    messages:{
                        pjjy:{
                            required:"请填写"
                        },
                        content:{
                            required:"请填写"
                        },
                        pycc:{
                            required:"请选择培养层次"
                        },
                        tkjs:{
                            required:"请填写"
                        },
                        tktime:{
                            required:"请填写听课时间"
                        },
                        tctd:{
                            required:"请填写"
                        },
                        tksh:{
                            required:"请填写"
                        },
                        larea:{
                            required:"请填写"
                        },
                    },
                    errorPlacement: function(error, element){
                        if (element.is(':radio') || element.is(':checkbox')) { 
                            var eid = element.attr('name'); 
                            error.appendTo(element.parent().next());
                    } else {
                    error.insertAfter(element);
                    }
                    }
        });
        $(".btn-success").click(function(){
            var $save = $(this).attr('save');
            if($save == 1){
                 if($("#form").valid()){
                        var $d=$("#form").serialize();
                        $d = $d + "&save=" + $save;
                        $.ajax({
                            type: 'post',
                            url: "{:U('Task/saveEditRecordT')}",
                            data: $d ,
                            success: function(data) {
                                $("#dialog").html(data.info);
                                $("#dialog").dialog('open');
                            }
                        });            
            }
        }
            else{
                var $d=$("#form").serialize(); //保存的情况
                $d = $d + "&save=" + $save;
                $.ajax({
                    type: 'post',
                    url: "{:U('Task/saveEditRecordT')}",
                    data: $d ,
                    success: function(data) {
                            $("#dialog").html(data.info);
                            $("#dialog").dialog('open');
                    }
                });
            }
        });
    });
</script>

<div id="dialog" title="信息" >
</div>

<include file="./jwcld/Tpl/footerTemp.html" />